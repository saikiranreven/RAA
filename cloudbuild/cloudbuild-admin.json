{
  "steps": [
    {
      "name": "gcr.io/cloud-builders/gcloud",
      "args": ["app", "deploy", "Admin/app.yaml", "--quiet"]
    },
    {
      "name": "gcr.io/cloud-builders/gcloud",
      "dir": "cloud_functions",
      "args": [
        "functions", "deploy", "update_inventory_on_order",
        "--gen2",
        "--runtime", "python310",
        "--trigger-event", "providers/cloud.firestore/eventTypes/document.create",
        "--trigger-resource", "projects/$PROJECT_ID/databases/(default)/documents/orders/{orderId}",
        "--region", "us-central1",
        "--quiet"
      ]
    }
  ],
  "timeout": "600s",
  "options": {
    "logging": "CLOUD_LOGGING_ONLY"
  }
}