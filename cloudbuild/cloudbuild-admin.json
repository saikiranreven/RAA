{
  "steps": [
    {
      "name": "gcr.io/cloud-builders/gcloud",
      "args": [
        "app", "deploy", "Admin/app.yaml", "--quiet"
      ]
    },
    {
      "name": "gcr.io/cloud-builders/gcloud",
      "dir": "cloud_functions",
      "args": [
        "functions", "deploy", "update_inventory_on_order",
        "--gen2",
        "--runtime", "python310",
        "--region", "us-central1",
        "--source", ".",
        "--entry-point", "update_inventory_on_order",
        "--trigger-location", "us-central1",
        "--event-filters", "type=google.cloud.firestore.document.v1.created",
        "--event-filters", "database=projects/$PROJECT_ID/databases/(default)",
        "--event-filters", "document=orders/{orderId}",
        "--quiet"
      ]
    }
  ],
  "options": { "logging": "CLOUD_LOGGING_ONLY" }
}